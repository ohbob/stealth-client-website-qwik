let T=t=>{let e=window,i=location.pathname+location.search,l="_qCitySPA",o="_qCityHistoryPatch",a="_qCityInitPopstate",r="_qCityInitAnchors",n="_qCityInitVisibility",s="_qCityInitScroll",c="_qCityScrollEnabled",h="_qCityScrollDebounce",d="_qCityScroll",y=t=>{t&&e.scrollTo(t.x,t.y)},u=()=>{let t=document.documentElement;return{x:t.scrollLeft,y:t.scrollTop,w:Math.max(t.scrollWidth,t.clientWidth),h:Math.max(t.scrollHeight,t.clientHeight)}},p=t=>{let e=history.state||{};e[d]=t||u(),history.replaceState(e,"")};if(!e[l]&&!e[a]&&!e[r]&&!e[n]&&!e[s]){if(p(),e[a]=()=>{var o;if(!e[l]){if(e[c]=!1,clearTimeout(e[h]),i!==location.pathname+location.search){let i=t.closest("[q\\:container]").querySelector('a[q\\:key="AD_1"]');if(i){let t=i.closest("[q\\:container]"),l=i.cloneNode();l.setAttribute("q:nbs",""),l.style.display="none",t.appendChild(l),e._qCityBootstrap=l,l.click()}else location.reload()}else if("manual"===history.scrollRestoration){let t=null==(o=history.state)?void 0:o[d];y(t),e[c]=!0}}},!e[o]){e[o]=!0;let t=history.pushState,i=history.replaceState,l=t=>(null===t?t={}:(null==t?void 0:t.constructor)!==Object&&(t={_data:t}),t._qCityScroll=t._qCityScroll||u(),t);history.pushState=(e,i,o)=>(e=l(e),t.call(history,e,i,o)),history.replaceState=(t,e,o)=>(t=l(t),i.call(history,t,e,o))}e[r]=t=>{if(e[l]||t.defaultPrevented)return;let i=t.target.closest("a[href]");if(i&&!i.hasAttribute("preventdefault:click")){let l=i.getAttribute("href"),o=new URL(location.href),a=new URL(l,o),r=a.origin===o.origin,n=a.pathname+a.search===o.pathname+o.search;if(r&&n){if(t.preventDefault(),a.href!==o.href&&history.pushState(null,"",a),a.hash){let t=a.hash.slice(1),e=document.getElementById(t);e&&e.scrollIntoView()}else a.href.endsWith("#")?window.scrollTo(0,0):(e[c]=!1,clearTimeout(e[h]),p({...u(),x:0,y:0}),location.reload())}}},e[n]=()=>{!e[l]&&e[c]&&"hidden"===document.visibilityState&&p()},e[s]=()=>{e[l]||!e[c]||(clearTimeout(e[h]),e[h]=setTimeout(()=>{p(),e[h]=void 0},200))},e[c]=!0,setTimeout(()=>{addEventListener("popstate",e[a]),addEventListener("scroll",e[s],{passive:!0}),document.body.addEventListener("click",e[r]),e.navigation||document.addEventListener("visibilitychange",e[n],{passive:!0})},0)}};export{T as s_DyVc0YBIqQU};